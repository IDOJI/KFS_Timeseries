---
title: "Time-serise data analysis (ì‚°ë¦¼ì²­)"
format: html
editor: visual
toc: TRUE
toc-depth: 5
toc-expand: 3
output:
  html_document:
    fig_width: 15  # ì ì ˆí•œ í­ìœ¼ë¡œ ì¡°ì •
---

# ğŸŸ¥Preliminary setting (hidden)

```{r, echo = FALSE, message=FALSE, warning=FALSE}
path_save = "/Users/Ido/Library/CloudStorage/Dropbox/@DataAnalysis/âœ´ï¸DataAnalysis___KFS_Timeseries/Results"
path_image = "/Users/Ido/Library/CloudStorage/Dropbox/@DataAnalysis/âœ´ï¸DataAnalysis___KFS_Timeseries/Results/images"

Results = readRDS(paste0(path_save, "/1.Timeseries_plots.rds"))


```

```{r, echo=F}

# ğŸŸ¥ Load Functions & Packages ##########################################################################
## ğŸŸ¨Install and loading Packages ================================
install_packages = function(packages, load=TRUE) {
  # load : load the packages after installation?
  for(pkg in packages) {
    if (!require(pkg, character.only = TRUE)) {
      install.packages(pkg)
    }
    
    if(load){
      library(pkg, character.only = TRUE, quietly = TRUE)
    }
  }
}

List.list = list()
List.list[[1]] = visual = c("ggpubr", "ggplot2", "ggstatsplot", "ggsignif", "rlang", "RColorBrewer")
List.list[[2]] = stat = c("fda", "MASS")
List.list[[3]] = data_handling = c("tidyverse", "dplyr", "clipr", "tidyr", "readr", "caret", "readxl")
List.list[[4]] = qmd = c("janitor", "knitr")
List.list[[5]] = texts = c("stringr")
List.list[[6]] = misc = c("devtools")
List.list[[7]] = db = c("RMySQL", "DBI", "odbc", "RSQL", "RSQLite")
List.list[[8]] = sampling = c("rsample")

packages_to_install_and_load = unlist(List.list)
install_packages(packages_to_install_and_load)



## ğŸŸ¨Loading my functions ======================================================
# Check my OS
os <- Sys.info()["sysname"]
if(os ==  "Darwin"){
  
  path_OS = "/Users/Ido" # mac
  
}else if(os ==  "Window"){
  
  path_OS = "C:/Users/lleii"  
  
}
path_Dropbox = paste0(path_OS, "/Dropbox")
path_GitHub = list.files(path_Dropbox, pattern = "GitHub", full.names = T)
path_GitHub_Code = paste0(path_GitHub, "/GitHub___Code")
Rpkgs = c("ADNIprep", "StatsR", "refineR", "dimR")
Load = sapply(Rpkgs, function(y){
  list.files(path = path_GitHub_Code, pattern = y, full.names = T) %>% 
    paste0(., "/", y,"/R") %>% 
    list.files(., full.names = T) %>% 
    purrr::walk(source)
})

```

# ğŸŸ¥ ì˜ì–´ ìš©ì–´ ì •ë¦¬

-   Total: ê³„

-   Transactional: ê±°ë˜í˜•

-   Nontransactional: ë¹„ê±°ë˜í˜•

-   Afforestation: ì‹ ê·œì¡°ë¦¼

-   Reforestation: ì¬ì¡°ë¦¼

-   Extended cutting cycle: ë²Œê¸°ë ¹ì—°ì¥

-   Species conversion: ìˆ˜ì¢…ê°±ì‹ 

-   Use of forest biomass for energy: ì‚°ë¦¼ë°”ì´ì˜¤ë§¤ìŠ¤ ì—ë„ˆì§€ ì´ìš©

-   Vegetation restoration: ì‹ìƒë³µêµ¬

# ğŸŸ¥Time-series Plots

## ğŸŸ§ì°¸ê³  ì‚¬í•­

-   NAì¸ ê²½ìš°ëŠ” 0ìœ¼ë¡œ ê°„ì£¼

## ğŸŸ§Each Variable

```{r, echo=F}
i=1
ith_results = Results[[i]]

```

### ğŸŸ¨ Total

-   Total = Transactional + Nontransactional

```{r, echo=F}
j=1
jth_results = ith_results[[j]]
```

#### ğŸŸ© Afforestation

```{r, echo=F}
k=1
print(jth_results[[k]])
```

#### ğŸŸ© Reforestation

```{r, echo=FALSE}
k = 2 # Reforestationì— í•´ë‹¹í•˜ëŠ” í”Œë¡¯
print(jth_results[[k]])
```

#### ğŸŸ© Extended cutting cycle

```{r, echo=FALSE}
k = 3 # Extended cutting cycleì— í•´ë‹¹í•˜ëŠ” í”Œë¡¯
print(jth_results[[k]])
```

#### ğŸŸ© Species conversion

```{r, echo=FALSE}
k = 4 # Species conversionì— í•´ë‹¹í•˜ëŠ” í”Œë¡¯
print(jth_results[[k]])
```

#### ğŸŸ© Use of forest biomass for energy

```{r, echo=FALSE}
k = 5 # Use of forest biomass for energyì— í•´ë‹¹í•˜ëŠ” í”Œë¡¯
print(jth_results[[k]])
```

#### ğŸŸ© Vegetation restoration

```{r, echo=FALSE}
k = 6 # Vegetation restorationì— í•´ë‹¹í•˜ëŠ” í”Œë¡¯
print(jth_results[[k]])
```

### ğŸŸ¨ Transactional

```{r, echo=F}
j=2
jth_results = ith_results[[j]]
```

#### ğŸŸ© Afforestation

```{r, echo=F}
k=1
print(jth_results[[k]])
```

#### ğŸŸ© Reforestation

```{r, echo=FALSE}
k = 2 # Reforestationì— í•´ë‹¹í•˜ëŠ” í”Œë¡¯
print(jth_results[[k]])
```

#### ğŸŸ© Extended cutting cycle

```{r, echo=FALSE}
k = 3 # Extended cutting cycleì— í•´ë‹¹í•˜ëŠ” í”Œë¡¯
print(jth_results[[k]])
```

#### ğŸŸ© Species conversion

```{r, echo=FALSE}
k = 4 # Species conversionì— í•´ë‹¹í•˜ëŠ” í”Œë¡¯
print(jth_results[[k]])
```

#### ğŸŸ© Use of forest biomass for energy

```{r, echo=FALSE}
k = 5 # Use of forest biomass for energyì— í•´ë‹¹í•˜ëŠ” í”Œë¡¯
print(jth_results[[k]])
```

#### ğŸŸ© Vegetation restoration

```{r, echo=FALSE}
k = 6 # Vegetation restorationì— í•´ë‹¹í•˜ëŠ” í”Œë¡¯
print(jth_results[[k]])
```

### ğŸŸ¨ NonTransactional

```{r, echo=F}
j=3
jth_results = ith_results[[j]]
```

#### ğŸŸ© Afforestation

```{r, echo=F}
k=1
print(jth_results[[k]])
```

#### ğŸŸ© Reforestation

```{r, echo=FALSE}
k = 2 # Reforestationì— í•´ë‹¹í•˜ëŠ” í”Œë¡¯
print(jth_results[[k]])
```

#### ğŸŸ© Extended cutting cycle

```{r, echo=FALSE}
k = 3 # Extended cutting cycleì— í•´ë‹¹í•˜ëŠ” í”Œë¡¯
print(jth_results[[k]])
```

#### ğŸŸ© Species conversion

```{r, echo=FALSE}
k = 4 # Species conversionì— í•´ë‹¹í•˜ëŠ” í”Œë¡¯
print(jth_results[[k]])
```

#### ğŸŸ© Use of forest biomass for energy

```{r, echo=FALSE}
k = 5 # Use of forest biomass for energyì— í•´ë‹¹í•˜ëŠ” í”Œë¡¯
print(jth_results[[k]])
```

#### ğŸŸ© Vegetation restoration

```{r, echo=FALSE}
k = 6 # Vegetation restorationì— í•´ë‹¹í•˜ëŠ” í”Œë¡¯
print(jth_results[[k]])
```

## ğŸŸ§All Variable

```{r, echo=F}
i=2
ith_results = Results[[i]]
```

### ğŸŸ¨ Total

-   Total = Transactional + Nontransactional

```{r, echo=F}
j=1
print(ith_results[[j]])
```

### ğŸŸ¨ Transactional

```{r, echo=F}
j=2
print(ith_results[[j]])
```

### ğŸŸ¨ NonTransactional

```{r, echo=F}
j=3
print(ith_results[[j]])
```

## ğŸŸ§Summed results

```{r, echo=F}
i=3
ith_results = Results[[i]]
```

-   ê° ë³€ìˆ˜ì— ëŒ€í•œ ëª¨ë“  ì—°ë„ì˜ ê°’ì„ í•©í•œ ê²°ê³¼ì…ë‹ˆë‹¤.

    -   Total: ê³„

    -   Transactional: ê±°ë˜í˜•

    -   Nontransactional: ë¹„ê±°ë˜í˜•

-   í•˜ë‚˜ì˜ ê°’ì´ ë„ˆë¬´ ì»¤ì„œ log ë³€í™˜í•œ í”Œë¡¯ì„ ì¶”ê°€.

    -   í”Œë¡¯ ìœ„ì˜ ê°’ì€ ë‘ ê²½ìš° ëª¨ë‘ originalê°’ì„ ì‚¬ìš©.

### ğŸŸ¨ Total

```{r, echo=F}
j=1
jth_results = ith_results[[j]]

```

#### ğŸŸ© Original

```{r, echo=F}
k=1
print(jth_results[[k]])
```

#### ğŸŸ© Log transformation

```{r, echo=FALSE}
k = 2 # Reforestationì— í•´ë‹¹í•˜ëŠ” í”Œë¡¯
print(jth_results[[k]])
```

### ğŸŸ¨ Transactional

```{r, echo=F}
j=2
jth_results = ith_results[[j]]

```

#### ğŸŸ© Original

```{r, echo=F}
k=1
print(jth_results[[k]])
```

#### ğŸŸ© Log transformation

```{r, echo=FALSE}
k = 2 # Reforestationì— í•´ë‹¹í•˜ëŠ” í”Œë¡¯
print(jth_results[[k]])
```

### ğŸŸ¨ Nontransactional

```{r, echo=F}
j=3
jth_results = ith_results[[j]]

```

#### ğŸŸ© Original

```{r, echo=F}
k=1
print(jth_results[[k]])
```

#### ğŸŸ© Log transformation

```{r, echo=FALSE}
k = 2 # Reforestationì— í•´ë‹¹í•˜ëŠ” í”Œë¡¯
print(jth_results[[k]])
```
